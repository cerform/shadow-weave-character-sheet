import React, { useState, useEffect, useRef } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Separator } from '@/components/ui/separator';
import { Avatar, AvatarImage, AvatarFallback } from "@/components/ui/avatar"
import { Slider } from "@/components/ui/slider"
import { useToast } from "@/hooks/use-toast"
import { v4 as uuidv4 } from 'uuid';
import { Character } from '@/types/character';
import { useCharacter } from '@/contexts/CharacterContext';
import { useTheme } from '@/hooks/use-theme';
import { themes } from '@/lib/themes';
import { Dice1 } from "lucide-react";

const DMSessionPage: React.FC = () => {
  const { characters } = useCharacter();
  const [npcName, setNpcName] = useState('');
  const [npcDescription, setNpcDescription] = useState('');
  const [npcList, setNpcList] = useState<any[]>([]);
  const [selectedCharacterId, setSelectedCharacterId] = useState<string | null>(null);
  const [selectedNpcId, setSelectedNpcId] = useState<string | null>(null);
  const [sessionNotes, setSessionNotes] = useState('');
  const [showNpcDetails, setShowNpcDetails] = useState(false);
  const [showCharacterDetails, setShowCharacterDetails] = useState(false);
  const [initiativeOrder, setInitiativeOrder] = useState<any[]>([]);
  const [currentTurnIndex, setCurrentTurnIndex] = useState(0);
  const [initiativeValue, setInitiativeValue] = useState('');
  const [isRollingInitiative, setIsRollingInitiative] = useState(false);
  const [rollResults, setRollResults] = useState<number[]>([]);
  const [showRollResults, setShowRollResults] = useState(false);
  const [diceFormula, setDiceFormula] = useState('1d20');
  const [diceRollResult, setDiceRollResult] = useState<number | null>(null);
  const [diceRollHistory, setDiceRollHistory] = useState<string[]>([]);
  const [showDiceRollHistory, setShowDiceRollHistory] = useState(false);
  const [diceRollDescription, setDiceRollDescription] = useState('');
  const [isRollingDice, setIsRollingDice] = useState(false);
  const [npcAvatarUrl, setNpcAvatarUrl] = useState('');
  const [npcAvatarFile, setNpcAvatarFile] = useState<File | null>(null);
  const [npcAvatarPreview, setNpcAvatarPreview] = useState('');
  const [npcAlignment, setNpcAlignment] = useState('');
  const [npcArmorClass, setNpcArmorClass] = useState('');
  const [npcHitPoints, setNpcHitPoints] = useState('');
  const [npcSpeed, setNpcSpeed] = useState('');
  const [npcStrength, setNpcStrength] = useState('');
  const [npcDexterity, setNpcDexterity] = useState('');
  const [npcConstitution, setNpcConstitution] = useState('');
  const [npcIntelligence, setNpcIntelligence] = useState('');
  const [npcWisdom, setNpcWisdom] = useState('');
  const [npcCharisma, setNpcCharisma] = useState('');
  const [npcAbilities, setNpcAbilities] = useState({
    strength: '',
    dexterity: '',
    constitution: '',
    intelligence: '',
    wisdom: '',
    charisma: ''
  });
  const [npcSkills, setNpcSkills] = useState('');
  const [npcDamageImmunities, setNpcDamageImmunities] = useState('');
  const [npcConditionImmunities, setNpcConditionImmunities] = useState('');
  const [npcSenses, setNpcSenses] = useState('');
  const [npcLanguages, setNpcLanguages] = useState('');
  const [npcChallenge, setNpcChallenge] = useState('');
  const [npcTraits, setNpcTraits] = useState('');
  const [npcActions, setNpcActions] = useState('');
  const [npcLegendaryActions, setNpcLegendaryActions] = useState('');
  const [npcEquipment, setNpcEquipment] = useState('');
  const [npcNotes, setNpcNotes] = useState('');
  const [npcType, setNpcType] = useState('');
  const [npcSize, setNpcSize] = useState('');
  const [npcArmorType, setNpcArmorType] = useState('');
  const [npcHitDice, setNpcHitDice] = useState('');
  const [npcSpeedDetails, setNpcSpeedDetails] = useState('');
  const [npcDamageResistances, setNpcDamageResistances] = useState('');
  const [npcDamageVulnerabilities, setNpcDamageVulnerabilities] = useState('');
  const [npcSkillsDetails, setNpcSkillsDetails] = useState('');
  const [npcSaves, setNpcSaves] = useState('');
  const [npcSavesDetails, setNpcSavesDetails] = useState('');
  const [npcSkillsList, setNpcSkillsList] = useState<any[]>([]);
  const [npcSavesList, setNpcSavesList] = useState<any[]>([]);
  const [npcActionsList, setNpcActionsList] = useState<any[]>([]);
  const [npcLegendaryActionsList, setNpcLegendaryActionsList] = useState<any[]>([]);
  const [npcTraitsList, setNpcTraitsList] = useState<any[]>([]);
  const [npcEquipmentList, setNpcEquipmentList] = useState<any[]>([]);
  const [npcNotesList, setNpcNotesList] = useState<any[]>([]);
  const [npcSpellsList, setNpcSpellsList] = useState<any[]>([]);
  const [npcSpells, setNpcSpells] = useState('');
  const [npcReactions, setNpcReactions] = useState('');
  const [npcReactionsList, setNpcReactionsList] = useState<any[]>([]);
  const [showNpcEditModal, setShowNpcEditModal] = useState(false);
  const [selectedNpc, setSelectedNpc] = useState<any | null>(null);
  const [npcCrDetails, setNpcCrDetails] = useState('');
  const [npcCrDetailsList, setNpcCrDetailsList] = useState<any[]>([]);
  const [npcImage, setNpcImage] = useState('');
  const [npcImageList, setNpcImageList] = useState<any[]>([]);
  const [npcImageDetails, setNpcImageDetails] = useState('');
  const [npcImageDetailsList, setNpcImageDetailsList] = useState<any[]>([]);
  const [npcSensesDetails, setNpcSensesDetails] = useState('');
  const [npcSensesDetailsList, setNpcSensesDetailsList] = useState<any[]>([]);
  const [npcLanguagesDetails, setNpcLanguagesDetails] = useState('');
  const [npcLanguagesDetailsList, setNpcLanguagesDetailsList] = useState<any[]>([]);
  const [npcDamageImmunitiesDetails, setNpcDamageImmunitiesDetails] = useState('');
  const [npcDamageImmunitiesDetailsList, setNpcDamageImmunitiesDetailsList] = useState<any[]>([]);
  const [npcDamageResistancesDetails, setNpcDamageResistancesDetailsList] = useState('');
  const [npcDamageResistancesDetailsList, setNpcDamageResistancesDetailsList] = useState<any[]>([]);
  const [npcDamageVulnerabilitiesDetails, setNpcDamageVulnerabilitiesDetailsList] = useState('');
  const [npcDamageVulnerabilitiesDetailsList, setNpcDamageVulnerabilitiesDetailsList] = useState<any[]>([]);
  const [npcConditionImmunitiesDetails, setNpcConditionImmunitiesDetailsList] = useState('');
  const [npcConditionImmunitiesDetailsList, setNpcConditionImmunitiesDetailsList] = useState<any[]>([]);
  const [npcReactionsDetails, setNpcReactionsDetails] = useState('');
  const [npcReactionsDetailsList, setNpcReactionsDetailsList] = useState<any[]>([]);
  const [npcTraitsDetails, setNpcTraitsDetails] = useState('');
  const [npcTraitsDetailsList, setNpcTraitsDetailsList] = useState<any[]>([]);
  const [npcActionsDetails, setNpcActionsDetails] = useState('');
  const [npcActionsDetailsList, setNpcActionsDetailsList] = useState<any[]>([]);
  const [npcLegendaryActionsDetails, setNpcLegendaryActionsDetails] = useState('');
  const [npcLegendaryActionsDetailsList, setNpcLegendaryActionsDetailsList] = useState<any[]>([]);
  const [npcEquipmentDetails, setNpcEquipmentDetails] = useState('');
  const [npcEquipmentDetailsList, setNpcEquipmentDetailsList] = useState<any[]>([]);
  const [npcNotesDetails, setNpcNotesDetails] = useState('');
  const [npcNotesDetailsList, setNpcNotesDetailsList] = useState<any[]>([]);
  const [npcSpellsDetails, setNpcSpellsDetails] = useState('');
  const [npcSpellsDetailsList, setNpcSpellsDetailsList] = useState<any[]>([]);
  const [npcCr, setNpcCr] = useState('');
  const [npcCrList, setNpcCrList] = useState<any[]>([]);
  const [npcCrDetailsName, setNpcCrDetailsName] = useState('');
  const [npcCrDetailsDescription, setNpcCrDetailsDescription] = useState('');
  const [npcCrDetailsAttackBonus, setNpcCrDetailsAttackBonus] = useState('');
  const [npcCrDetailsDamagePerRound, setNpcCrDetailsDamagePerRound] = useState('');
  const [npcCrDetailsArmorClass, setNpcCrDetailsArmorClass] = useState('');
  const [npcCrDetailsHitPoints, setNpcCrDetailsHitPoints] = useState('');
  const [npcCrDetailsExperiencePoints, setNpcCrDetailsExperiencePoints] = useState('');
  const [npcCrDetailsProficiencyBonus, setNpcCrDetailsProficiencyBonus] = useState('');
  const [npcCrDetailsSaves, setNpcCrDetailsSaves] = useState('');
  const [npcCrDetailsSkills, setNpcCrDetailsSkills] = useState('');
  const [npcCrDetailsSenses, setNpcCrDetailsSenses] = useState('');
  const [npcCrDetailsLanguages, setNpcCrDetailsLanguages] = useState('');
  const [npcCrDetailsDamageImmunities, setNpcCrDetailsDamageImmunities] = useState('');
  const [npcCrDetailsDamageResistances, setNpcCrDetailsDamageResistances] = useState('');
  const [npcCrDetailsDamageVulnerabilities, setNpcCrDetailsDamageVulnerabilities] = useState('');
  const [npcCrDetailsConditionImmunities, setNpcCrDetailsConditionImmunities] = useState('');
  const [npcCrDetailsReactions, setNpcCrDetailsReactions] = useState('');
  const [npcCrDetailsTraits, setNpcCrDetailsTraits] = useState('');
  const [npcCrDetailsActions, setNpcCrDetailsActions] = useState('');
  const [npcCrDetailsLegendaryActions, setNpcCrDetailsLegendaryActions] = useState('');
  const [npcCrDetailsEquipment, setNpcCrDetailsEquipment] = useState('');
  const [npcCrDetailsNotes, setNpcCrDetailsNotes] = useState('');
  const [npcCrDetailsSpells, setNpcCrDetailsSpells] = useState('');
  const [npcCrDetailsImage, setNpcCrDetailsImage] = useState('');
  const [npcCrDetailsImageDetails, setNpcCrDetailsImageDetails] = useState('');
  const [npcCrDetailsSensesDetails, setNpcCrDetailsSensesDetails] = useState('');
  const [npcCrDetailsLanguagesDetails, setNpcCrDetailsLanguagesDetails] = useState('');
  const [npcCrDetailsDamageImmunitiesDetails, setNpcCrDetailsDamageImmunitiesDetails] = useState('');
  const [npcCrDetailsDamageResistancesDetails, setNpcCrDetailsDamageResistancesDetails] = useState('');
  const [npcCrDetailsDamageVulnerabilitiesDetails, setNpcCrDetailsDamageVulnerabilitiesDetails] = useState('');
  const [npcCrDetailsConditionImmunitiesDetails, setNpcCrDetailsConditionImmunitiesDetails] = useState('');
  const [npcCrDetailsReactionsDetails, setNpcCrDetailsReactionsDetails] = useState('');
  const [npcCrDetailsTraitsDetails, setNpcCrDetailsTraitsDetails] = useState('');
  const [npcCrDetailsActionsDetails, setNpcCrDetailsActionsDetails] = useState('');
  const [npcCrDetailsLegendaryActionsDetails, setNpcCrDetailsLegendaryActionsDetails] = useState('');
  const [npcCrDetailsEquipmentDetails, setNpcCrDetailsEquipmentDetails] = useState('');
  const [npcCrDetailsNotesDetails, setNpcCrDetailsNotesDetails] = useState('');
  const [npcCrDetailsSpellsDetails, setNpcCrDetailsSpellsDetails] = useState('');
  const [npcCrDetailsCr, setNpcCrDetailsCr] = useState('');
  const [npcCrDetailsCrList, setNpcCrDetailsCrList] = useState<any[]>([]);
  const [npcCrDetailsCrDetailsName, setNpcCrDetailsCrDetailsName] = useState('');
  const [npcCrDetailsCrDetailsDescription, setNpcCrDetailsCrDetailsDescription] = useState('');
  const [npcCrDetailsCrDetailsAttackBonus, setNpcCrDetailsCrDetailsAttackBonus] = useState('');
  const [npcCrDetailsCrDetailsDamagePerRound, setNpcCrDetailsCrDetailsDamagePerRound] = useState('');
  const [npcCrDetailsCrDetailsArmorClass, setNpcCrDetailsCrDetailsArmorClass] = useState('');
  const [npcCrDetailsCrDetailsHitPoints, setNpcCrDetailsCrDetailsHitPoints] = useState('');
  const [npcCrDetailsCrDetailsExperiencePoints, setNpcCrDetailsCrDetailsExperiencePoints] = useState('');
  const [npcCrDetailsCrDetailsProficiencyBonus, setNpcCrDetailsCrDetailsProficiencyBonus] = useState('');
  const [npcCrDetailsCrDetailsSaves, setNpcCrDetailsCrDetailsSaves] = useState('');
  const [npcCrDetailsCrDetailsSkills, setNpcCrDetailsCrDetailsSkills] = useState('');
  const [npcCrDetailsCrDetailsSenses, setNpcCrDetailsCrDetailsSenses] = useState('');
  const [npcCrDetailsCrDetailsLanguages, setNpcCrDetailsCrDetailsLanguages] = useState('');
  const [npcCrDetailsCrDetailsDamageImmunities, setNpcCrDetailsCrDetailsDamageImmunities] = useState('');
  const [npcCrDetailsCrDetailsDamageResistances, setNpcCrDetailsCrDetailsDamageResistances] = useState('');
  const [npcCrDetailsCrDetailsDamageVulnerabilities, setNpcCrDetailsCrDetailsDamageVulnerabilities] = useState('');
  const [npcCrDetailsCrDetailsConditionImmunities, setNpcCrDetailsCrDetailsConditionImmunities] = useState('');
  const [npcCrDetailsCrDetailsReactions, setNpcCrDetailsCrDetailsReactions] = useState('');
  const [npcCrDetailsCrDetailsTraits, setNpcCrDetailsCrDetailsTraits] = useState('');
  const [npcCrDetailsCrDetailsActions, setNpcCrDetailsCrDetailsActions] = useState('');
  const [npcCrDetailsCrDetailsLegendaryActions, setNpcCrDetailsCrDetailsLegendaryActions] = useState('');
  const [npcCrDetailsCrDetailsEquipment, setNpcCrDetailsCrDetailsEquipment] = useState('');
  const [npcCrDetailsCrDetailsNotes, setNpcCrDetailsCrDetailsNotes] = useState('');
  const [npcCrDetailsCrDetailsSpells, setNpcCrDetailsCrDetailsSpells] = useState('');
  const [npcCrDetailsCrDetailsImage, setNpcCrDetailsCrDetailsImage] = useState('');
  const [npcCrDetailsCrDetailsImageDetails, setNpcCrDetailsCrDetailsImageDetails] = useState('');
  const [npcCrDetailsCrDetailsSensesDetails, setNpcCrDetailsCrDetailsSensesDetails] = useState('');
  const [npcCrDetailsCrDetailsLanguagesDetails, setNpcCrDetailsCrDetailsLanguagesDetails] = useState('');
  const [npcCrDetailsCrDetailsDamageImmunitiesDetails, setNpcCrDetailsCrDetailsDamageImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsDamageResistancesDetails, setNpcCrDetailsCrDetailsDamageResistancesDetails] = useState('');
  const [npcCrDetailsCrDetailsDamageVulnerabilitiesDetails, setNpcCrDetailsCrDetailsDamageVulnerabilitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsConditionImmunitiesDetails, setNpcCrDetailsCrDetailsConditionImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsReactionsDetails, setNpcCrDetailsCrDetailsReactionsDetails] = useState('');
  const [npcCrDetailsCrDetailsTraitsDetails, setNpcCrDetailsCrDetailsTraitsDetails] = useState('');
  const [npcCrDetailsCrDetailsActionsDetails, setNpcCrDetailsCrDetailsActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsLegendaryActionsDetails, setNpcCrDetailsCrDetailsLegendaryActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsEquipmentDetails, setNpcCrDetailsCrDetailsEquipmentDetails] = useState('');
  const [npcCrDetailsCrDetailsNotesDetails, setNpcCrDetailsCrDetailsNotesDetails] = useState('');
  const [npcCrDetailsCrDetailsSpellsDetails, setNpcCrDetailsCrDetailsSpellsDetails] = useState('');
  const [npcCrDetailsCrDetailsCr, setNpcCrDetailsCrDetailsCr] = useState('');
  const [npcCrDetailsCrDetailsCrList, setNpcCrDetailsCrDetailsCrList] = useState<any[]>([]);
  const [npcCrDetailsCrDetailsCrDetailsName, setNpcCrDetailsCrDetailsCrDetailsName] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDescription, setNpcCrDetailsCrDetailsCrDetailsDescription] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsAttackBonus, setNpcCrDetailsCrDetailsCrDetailsAttackBonus] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamagePerRound, setNpcCrDetailsCrDetailsCrDetailsDamagePerRound] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsArmorClass, setNpcCrDetailsCrDetailsCrDetailsArmorClass] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsHitPoints, setNpcCrDetailsCrDetailsCrDetailsHitPoints] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsExperiencePoints, setNpcCrDetailsCrDetailsCrDetailsExperiencePoints] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsProficiencyBonus, setNpcCrDetailsCrDetailsCrDetailsProficiencyBonus] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsSaves, setNpcCrDetailsCrDetailsCrDetailsSaves] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsSkills, setNpcCrDetailsCrDetailsCrDetailsSkills] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsSenses, setNpcCrDetailsCrDetailsCrDetailsSenses] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsLanguages, setNpcCrDetailsCrDetailsCrDetailsLanguages] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamageImmunities, setNpcCrDetailsCrDetailsCrDetailsDamageImmunities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamageResistances, setNpcCrDetailsCrDetailsCrDetailsDamageResistances] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamageVulnerabilities, setNpcCrDetailsCrDetailsCrDetailsDamageVulnerabilities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsConditionImmunities, setNpcCrDetailsCrDetailsCrDetailsConditionImmunities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsReactions, setNpcCrDetailsCrDetailsCrDetailsReactions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsTraits, setNpcCrDetailsCrDetailsCrDetailsTraits] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsActions, setNpcCrDetailsCrDetailsCrDetailsActions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsLegendaryActions, setNpcCrDetailsCrDetailsCrDetailsLegendaryActions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsEquipment, setNpcCrDetailsCrDetailsCrDetailsEquipment] = useState '';
  const [npcCrDetailsCrDetailsCrDetailsNotes, setNpcCrDetailsCrDetailsCrDetailsNotes] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsSpells, setNpcCrDetailsCrDetailsCrDetailsSpells] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsImage, setNpcCrDetailsCrDetailsCrDetailsImage] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsImageDetails, setNpcCrDetailsCrDetailsCrDetailsImageDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsSensesDetails, setNpcCrDetailsCrDetailsCrDetailsSensesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsLanguagesDetails, setNpcCrDetailsCrDetailsCrDetailsLanguagesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamageImmunitiesDetails, setNpcCrDetailsCrDetailsCrDetailsDamageImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamageResistancesDetails, setNpcCrDetailsCrDetailsCrDetailsDamageResistancesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsDamageVulnerabilitiesDetails, setNpcCrDetailsCrDetailsCrDetailsDamageVulnerabilitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsConditionImmunitiesDetails, setNpcCrDetailsCrDetailsCrDetailsConditionImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsReactionsDetails, setNpcCrDetailsCrDetailsCrDetailsReactionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsTraitsDetails, setNpcCrDetailsCrDetailsCrDetailsTraitsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsActionsDetails, setNpcCrDetailsCrDetailsCrDetailsActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsLegendaryActionsDetails, setNpcCrDetailsCrDetailsCrDetailsLegendaryActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsEquipmentDetails, setNpcCrDetailsCrDetailsCrDetailsEquipmentDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsNotesDetails, setNpcCrDetailsCrDetailsCrDetailsNotesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsSpellsDetails, setNpcCrDetailsCrDetailsCrDetailsSpellsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCr, setNpcCrDetailsCrDetailsCrDetailsCr] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrList, setNpcCrDetailsCrDetailsCrDetailsCrList] = useState<any[]>([]);
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsName, setNpcCrDetailsCrDetailsCrDetailsCrDetailsName] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDescription, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDescription] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsAttackBonus, setNpcCrDetailsCrDetailsCrDetailsCrDetailsAttackBonus] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamagePerRound, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamagePerRound] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsArmorClass, setNpcCrDetailsCrDetailsCrDetailsCrDetailsArmorClass] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsHitPoints, setNpcCrDetailsCrDetailsCrDetailsCrDetailsHitPoints] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsExperiencePoints, setNpcCrDetailsCrDetailsCrDetailsCrDetailsExperiencePoints] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsProficiencyBonus, setNpcCrDetailsCrDetailsCrDetailsCrDetailsProficiencyBonus] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsSaves, setNpcCrDetailsCrDetailsCrDetailsCrDetailsSaves] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsSkills, setNpcCrDetailsCrDetailsCrDetailsCrDetailsSkills] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsSenses, setNpcCrDetailsCrDetailsCrDetailsCrDetailsSenses] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsLanguages, setNpcCrDetailsCrDetailsCrDetailsCrDetailsLanguages] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunities, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamageResistances, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamageResistances] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilities, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunities, setNpcCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsReactions, setNpcCrDetailsCrDetailsCrDetailsCrDetailsReactions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsTraits, setNpcCrDetailsCrDetailsCrDetailsCrDetailsTraits] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsActions, setNpcCrDetailsCrDetailsCrDetailsCrDetailsActions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActions, setNpcCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsEquipment, setNpcCrDetailsCrDetailsCrDetailsCrDetailsEquipment] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsNotes, setNpcCrDetailsCrDetailsCrDetailsCrDetailsNotes] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsSpells, setNpcCrDetailsCrDetailsCrDetailsCrDetailsSpells] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsImage, setNpcCrDetailsCrDetailsCrDetailsCrDetailsImage] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsImageDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsImageDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsSensesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsSensesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsLanguagesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsLanguagesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunitiesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamageResistancesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamageResistancesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilitiesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunitiesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsReactionsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsReactionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsTraitsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsTraitsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsActionsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActionsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsEquipmentDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsEquipmentDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsNotesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsNotesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsSpellsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsSpellsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCr, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCr] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrList, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrList] = useState<any[]>([]);
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsName, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsName] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDescription, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDescription] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsAttackBonus, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsAttackBonus] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamagePerRound, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamagePerRound] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsArmorClass, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsArmorClass] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsHitPoints, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsHitPoints] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsExperiencePoints, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsExperiencePoints] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsProficiencyBonus, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsProficiencyBonus] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSaves, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSaves] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSkills, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSkills] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSenses, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSenses] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLanguages, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLanguages] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunities, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageResistances, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageResistances] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilities, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunities, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunities] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsReactions, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsReactions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsTraits, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsTraits] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsActions, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsActions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActions, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActions] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsEquipment, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsEquipment] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsNotes, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsNotes] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSpells, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSpells] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsImage, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsImage] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsImageDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsImageDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSensesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSensesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLanguagesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLanguagesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunitiesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageResistancesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageResistancesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilitiesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsDamageVulnerabilitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunitiesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsConditionImmunitiesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsReactionsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsReactionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsTraitsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsTraitsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsActionsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActionsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsLegendaryActionsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsEquipmentDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsEquipmentDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsNotesDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsNotesDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSpellsDetails, setNpcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsSpellsDetails] = useState('');
  const [npcCrDetailsCrDetailsCrDetailsCrDetailsCrDetailsCr, set
