
import { CharacterSpell } from '@/types/character';
import { slugify } from '@/utils/stringUtils';

// Helper function to add id to spells
const addId = (spell: Partial<CharacterSpell>): CharacterSpell => {
  return {
    ...spell,
    id: `spell-${slugify(spell.name || 'unknown')}`,
  } as CharacterSpell;
};

export const level4Part3: CharacterSpell[] = [
  addId({
    name: "Огненный щит",
    level: 4,
    school: "Вызов",
    castingTime: "1 действие",
    range: "На себя",
    components: "В, С, М (кусочек фосфора или огненный жук)",
    verbal: true,
    somatic: true,
    material: true,
    concentration: false,
    ritual: false,
    duration: "10 минут",
    description: "Тонкая завеса пламени окружает вас, излучая яркий свет в радиусе 10 футов и тусклый свет в пределах еще 10 футов. Вы можете преждевременно окончить заклинание, используя действие. Пламя имеет тёплый оттенок. До окончания действия заклинания вы обладаете следующими преимуществами:\n• Вы получаете сопротивление к урону холодом.\n• Любое существо, которое впервые за ход или заканчивает ход в пределах 5 футов от вас, получает 2к8 урона огнем.\n• Вы невосприимчивы к магии, которая позволяет другим существам читать ваши мысли, определить, лжете ли вы, знать ваши намерения или ваше мировоззрение.",
    classes: ["Волшебник"]
  }),
  addId({
    name: "Опутывающая лоза",
    level: 4,
    school: "Преобразование",
    castingTime: "1 действие",
    range: "Дистанция 30 футов",
    components: "В, С",
    verbal: true,
    somatic: true,
    material: false,
    concentration: true,
    ritual: false,
    duration: "Концентрация, вплоть до 1 минуты",
    description: "Вы вызываете толстую, извивающуюся лозу, которая появляется в точке в пределах дистанции. Когда вы сотворяете это заклинание, вы можете направить лозу на существо в пределах 30 футов от неё, которое вы можете видеть. Цель должна преуспеть в спасброске Ловкости, иначе её утягивает на 20 футов к лозе или лоза оплетает её. Существо, опутанное лозой, получает помеху на броски атаки и спасброски Ловкости, а его скорость становится равной 0. В свой ход, используя ваше действие, вы можете направить лозу, выбрав между следующим:\n• Оплести. Существо в пределах 30 футов от лозы, которые вы можете видеть, должно преуспеть в спасброске Ловкости, иначе на него воздействуют те же эффекты, что указаны выше.\n• Отпустить. Одно существо, опутанное лозой, больше не опутано, и лоза может воздействовать на другое существо.",
    classes: ["Рейнджер"]
  }),
  addId({
    name: "Отилюков упругий шар",
    level: 4,
    school: "Вызов",
    castingTime: "1 действие",
    range: "Дистанция 60 футов",
    components: "В, С, М (кристаллический шарик)",
    verbal: true,
    somatic: true,
    material: true,
    concentration: true,
    ritual: false,
    duration: "Концентрация, вплоть до 1 минуты",
    description: "Сфера прозрачной силы, диаметром 10 футов, возникает и заключает внутри существо или объект Среднего размера или меньше, которого вы выбираете в пределах действия. Существо, заключенное таким образом, может действием совершить проверку Силы, чтобы вырваться. С КС 10 + ваш модификатор базовой характеристики + ваш бонус мастерства. Находясь внутри сферы, существо дышит нормально, и сфера защищает его от внешних атак или других эффектов, но не предотвращает телепортацию или планарные перемещения. Вы можете использовать бонусное действие, чтобы переместить сферу до 30 футов по прямой линии. Если она сталкивается с твердой поверхностью или объектом большего размера, сфера останавливается. Если она сталкивается с существом, оно должно преуспеть в спасброске Ловкости, иначе получает 4к10 урона силой. Сфера неуязвима к любому урону, и существа или объекты внутри не могут повредить ее снаружи.",
    classes: ["Волшебник"]
  }),
  addId({
    name: "Переносящая дверь",
    level: 4,
    school: "Преобразование",
    castingTime: "1 действие",
    range: "500 футов",
    components: "В",
    verbal: true,
    somatic: false,
    material: false,
    concentration: false,
    ritual: false,
    duration: "Мгновенная",
    description: "Вы телепортируетесь из вашего текущего местоположения в любое другое место в пределах дистанции. Вы прибываете точно в желаемую точку. Это может быть место, которое вы можете видеть, которое вы можете представить, или которое вы можете описать, указав расстояние и направление, например: «200 футов строго вниз» или «вверх на северо-запад под углом 45 градусов, 300 футов». Вы можете взять с собой предметы, если их вес не превышает то, что вы можете нести. Вы также можете взять с собой одно согласное существо вашего размера или меньше, которое несет снаряжение до его предела переноски. Существо должно находиться в пределах 5 футов от вас, когда вы используете это заклинание. Если вы прибываете в место, которое уже занято другим существом или объектом, вы получаете 4к6 силового урона, а заклинание не перемещает вас.",
    classes: ["Бард", "Чародей", "Волшебник"]
  }),
  addId({
    name: "Подчинение зверя",
    level: 4,
    school: "Очарование",
    castingTime: "1 действие",
    range: "60 футов",
    components: "В, С, М (кусочек еды)",
    verbal: true,
    somatic: true,
    material: true,
    concentration: false,
    ritual: false,
    duration: "24 часа",
    description: "Вы пытаетесь очаровать зверя, которого можете видеть в пределах дистанции. Он должен преуспеть в спасброске Мудрости, иначе становится очарованным на время длительности заклинания. Если вы или ваши спутники сражаетесь с ним, он получает преимущество на спасбросок. Пока зверь очарован, у вас с ним телепатическая связь, пока вы находитесь на одном плане существования. Вы можете использовать эту телепатическую связь, чтобы отдавать команды существу, пока вы находитесь в сознании (действие не требуется). Вы можете точно говорить существу, что оно должно делать, и какой маршрут выбрать. Если вы не отдаете никаких команд, существо просто защищает себя от враждебных существ. После получения команды существо продолжает выполнять её до завершения.",
    classes: ["Друид", "Рейнджер"]
  }),
  addId({
    name: "Подчинение растения",
    level: 4,
    school: "Очарование",
    castingTime: "1 действие",
    range: "60 футов",
    components: "В, С",
    verbal: true,
    somatic: true,
    material: false,
    concentration: true,
    ritual: false,
    duration: "Концентрация, вплоть до 1 минуты",
    description: "Это заклинание позволяет вам контролировать разум существ растительного происхождения. Выберите точку в пределах дистанции. Растительные существа в радиусе 30 футов от этой точки должны совершить спасбросок Мудрости, если их хиты максимальны. При провале существо становится очарованным на время действия заклинания. Очарованное существо знает о том, что оно очаровано вами. Пока ваша концентрация на этом заклинании не окончится, вы можете бонусным действием в каждом своем ходу указывать всем очарованным вами с помощью этого заклинания существам, что они должны делать в свой следующий ход. Цель может совершить новый спасбросок Мудрости в конце каждого своего хода. При успехе эффект очарования для неё заканчивается, и она понимает, что её разум был под вашим контролем.",
    classes: ["Друид", "Рейнджер"]
  }),
  addId({
    name: "Призыв малых элементалей",
    level: 4,
    school: "Вызов",
    castingTime: "1 минута",
    range: "90 футов",
    components: "В, С",
    verbal: true,
    somatic: false,
    material: false,
    concentration: false,
    ritual: false,
    duration: "1 час",
    description: "Вы призываете стихийных духов, которые появляются в незанятых пространствах, видимых в пределах дистанции. Выберите один из следующих вариантов для призыва:\n• Один элементаль с показателем опасности 2 или ниже\n• Два элементаля с показателем опасности 1 или ниже\n• Четыре элементаля с показателем опасности 1/2 или ниже\n• Восемь элементалей с показателем опасности 1/4 или ниже\nПризванный элементаль исчезает, если его хиты опускаются до 0, или когда заклинание оканчивается. Призванные существа дружелюбны по отношению к вам и вашим спутникам. Бросайте инициативу за призванных существ как за группу, которая совершает свои ходы в свой черед. Они подчиняются любым устным командам, которые вы им отдаете (действие не требуется). Если вы не отдаете им никаких команд, они защищают себя от враждебных существ, но совершают никаких действий.",
    classes: ["Друид", "Волшебник"]
  }),
  addId({
    name: "Призыв лесных обитателей",
    level: 4,
    school: "Вызов",
    castingTime: "1 действие",
    range: "60 футов",
    components: "В, С, М (ягода можжевельника)",
    verbal: true,
    somatic: false,
    material: false,
    concentration: true,
    ritual: false,
    duration: "Концентрация, вплоть до 1 часа",
    description: "Вы призываете фей и лесных духов, которые появляются в незанятых местах, которые вы можете видеть в радиусе дистанции заклинания. Выберите один из следующих вариантов для появления:\n• Одна фея или лесной дух с показателем опасности 2 или ниже\n• Две феи или лесных духа с показателем опасности 1 или ниже\n• Четыре феи или лесных духа с показателем опасности 1/2 или ниже\n• Восемь фей или лесных духов с показателем опасности 1/4 или ниже\nПризванное существо исчезает, когда его хиты опускаются до 0, или когда заклинание оканчивается. Призванные существа дружественны по отношению к вам и вашим спутникам. Бросайте инициативу за призванных существ как за группу, которая совершает свои ходы в свой черед. Они подчиняются любым устным командам, которые вы им отдаете (действие не требуется). Если вы не отдаете им никаких команд, они защищают себя от враждебных существ, но совершают никаких действий.",
    classes: ["Друид", "Рейнджер"]
  }),
  addId({
    name: "Смятение",
    level: 4,
    school: "Очарование",
    castingTime: "1 действие",
    range: "90 футов",
    components: "В, С, М (три скорлупы орехов)",
    verbal: true,
    somatic: true,
    material: true,
    concentration: true,
    ritual: false,
    duration: "Концентрация, вплоть до 1 минуты",
    description: "Это заклинание вызывает замешательство и сеет распри среди существ. Все существа в сфере радиусом 10 футов с центром на точке, выбранной в пределах дистанции, должны преуспеть в спасброске Мудрости, иначе будут поражены этим заклинанием на время его длительности. Поражённая цель не может совершать реакции и должна в начале каждого своего хода бросать к10, определяя по результату своё поведение на этот ход.\n1: Существо использует всё своё перемещение для движения в случайном направлении. Для определения направления бросьте к8 и назначьте каждой грани направление. Существо не совершает действий в этом раунде.\n2–6: Существо никуда не перемещается и не совершает действий в этом раунде.\n7–8: Существо совершает рукопашную атаку по случайному существу в пределах своей досягаемости. Если поблизости нет ничего, чего оно может атаковать, существо ничего не делает в течение хода.\n9–10: Существо может действовать и перемещаться как обычно.",
    classes: ["Бард", "Друид", "Чародей", "Колдун", "Волшебник"]
  }),
  addId({
    name: "Создание",
    level: 4,
    school: "Иллюзия",
    castingTime: "1 минута",
    range: "30 футов",
    components: "В, С, М (кусочек материала того типа, который вы хотите создать)",
    verbal: true,
    somatic: true,
    material: false,
    concentration: false,
    ritual: false,
    duration: "Особая",
    description: "Вы вытягиваете переливающиеся тени из Страны Фей, чтобы создать неживой объект из растительного материала — ткани, дерева или чего-то подобного — в пределах дистанции: мягких товаров, верёвки, деревянных изделий или чего-то подобного. Этим заклинанием можно также создавать минеральные объекты, такие как камень, кристалл или металл. Созданный объект должен быть не больше куба со стороной 5 футов, и он должен иметь форму и материал, с которыми вы знакомы. Длительность заклинания зависит от материала объекта. Если объект состоит из нескольких материалов, используется самая короткая длительность.",
    classes: ["Чародей", "Волшебник"]
  }),
  addId({
    name: "Хождение по воде",
    level: 4,
    school: "Превращение",
    castingTime: "1 действие",
    range: "30 футов",
    components: "В, С, М (кусочек пробки)",
    verbal: true,
    somatic: true,
    material: true,
    concentration: false,
    ritual: true,
    duration: "1 час",
    description: "Это заклинание предоставляет возможность перемещаться по любой жидкой поверхности — такой как вода, кислота, грязь, снег, зыбучие пески, или лава — как если бы это была твёрдая поверхность (существа, идущие по лаве, всё же получают урон от жара). На протяжении длительности заклинания до десяти добровольных существ, видимых вами в пределах дистанции, получают эту способность. Если вы нацеливаетесь на существо, погруженное в жидкость, заклинание переносит цель на поверхность жидкости с темпом 60 фт. в раунд. Длительность этого заклинания можно продлить.",
    classes: ["Друид", "Следопыт", "Чародей", "Колдун", "Волшебник"]
  }),
  addId({
    name: "Элементальное оружие",
    level: 4,
    school: "Преобразование",
    castingTime: "1 действие",
    range: "Касание",
    components: "В, С",
    verbal: true,
    somatic: true,
    material: true,
    concentration: true,
    ritual: false,
    duration: "Концентрация, вплоть до 1 часа",
    description: "Немагическое оружие, которого вы касаетесь, становится магическим оружием. Выберите один из следующих типов урона: звук, кислота, огонь, холод или электричество. На время действия заклинания оружие получает бонус +1 к броскам атаки и наносит дополнительно 1к4 урона выбранного типа при попадании. Если заклинание наложить заклинание, используя ячейку 5 или 6 уровня, бонус атаки возрастает до +2, а дополнительный урон до 2к4. При использовании ячейки 7 уровня или выше бонус атаки возрастает до +3, а дополнительный урон до 3к4.",
    classes: ["Паладин"]
  })
];

export default level4Part3;
