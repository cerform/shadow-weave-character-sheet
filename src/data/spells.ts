
export interface Spell {
  name: string;
  level: number;
  classes: string[];
  school: string;
  description: string;
}

export const spells: Spell[] = [
  {
    name: "Огненный Снаряд",
    level: 0,
    classes: ["Маг", "Чародей", "Колдун"],
    school: "Воплощение",
    description: "Вы создаете сгусток огня, наносящий 1d10 урона."
  },
  {
    name: "Луч Холода",
    level: 0,
    classes: ["Маг", "Чародей"],
    school: "Воплощение",
    description: "Вы выпускаете ледяной луч, наносящий холодный урон."
  },
  {
    name: "Свет",
    level: 0,
    classes: ["Клирик", "Маг", "Бард", "Друид"],
    school: "Воплощение",
    description: "Вы освещаете предмет ярким светом."
  },
  {
    name: "Починка",
    level: 0,
    classes: ["Бард", "Клирик", "Друид", "Маг"],
    school: "Воплощение",
    description: "Вы восстанавливаете целостность мелких объектов."
  },
  {
    name: "Танцующие Огни",
    level: 0,
    classes: ["Бард", "Друид", "Маг"],
    school: "Иллюзия",
    description: "Вы создаете несколько светящихся огоньков."
  },
  {
    name: "Шокирующее Прикосновение",
    level: 0,
    classes: ["Маг"],
    school: "Воплощение",
    description: "Вы касаетесь существа, нанося ему электрический урон."
  },
  {
    name: "Кислотный Брызг",
    level: 0,
    classes: ["Маг", "Чародей"],
    school: "Воплощение",
    description: "Вы плескаете кислотой в противника."
  },
  {
    name: "Рука Магнуса",
    level: 0,
    classes: ["Маг", "Чародей", "Колдун"],
    school: "Призывание",
    description: "Вы создаете магическую руку для манипуляций на расстоянии."
  },
  {
    name: "Сопротивление",
    level: 0,
    classes: ["Клирик", "Друид"],
    school: "Ограждение",
    description: "Вы даете существу бонус к спасброскам."
  },
  {
    name: "Ядовитое Облако",
    level: 0,
    classes: ["Друид", "Чародей", "Колдун"],
    school: "Воплощение",
    description: "Вы создаете облако ядовитого газа, наносящее урон."
  },
  {
    name: "Щит",
    level: 1,
    classes: ["Маг", "Чародей"],
    school: "Ограждение",
    description: "Вы создаете невидимый магический барьер, увеличивающий КД на 5 до начала вашего следующего хода."
  },
  {
    name: "Магическая Броня",
    level: 1,
    classes: ["Маг", "Чародей"],
    school: "Ограждение",
    description: "Вы окружаете существо защитным полем, увеличивающим КД на продолжительный срок."
  },
  {
    name: "Исцеляющее Прикосновение",
    level: 1,
    classes: ["Клирик", "Друид", "Паладин"],
    school: "Воплощение",
    description: "Вы восстанавливаете количество здоровья касанием."
  },
  {
    name: "Обнаружение Магии",
    level: 1,
    classes: ["Клирик", "Маг", "Друид"],
    school: "Прорицание",
    description: "Вы чувствуете присутствие магии поблизости."
  },
  {
    name: "Щит Веры",
    level: 1,
    classes: ["Клирик", "Паладин"],
    school: "Ограждение",
    description: "Создаете светящийся щит вокруг существа, увеличивающий его КД."
  },
  {
    name: "Ведьмин Снаряд",
    level: 1,
    classes: ["Колдун"],
    school: "Воплощение",
    description: "Вы направляете магическую энергию в цель, поддерживая её в последующих ходах."
  },
  {
    name: "Очарование Лица",
    level: 1,
    classes: ["Бард", "Маг", "Чародей"],
    school: "Очарование",
    description: "Вы пытаетесь очаровать существо, заставляя его видеть вас своим союзником."
  },
  {
    name: "Зачарованное Оружие",
    level: 1,
    classes: ["Бард", "Паладин"],
    school: "Воплощение",
    description: "Вы усиливаете оружие, придавая ему магическую силу."
  },
  {
    name: "Проклятие",
    level: 1,
    classes: ["Колдун"],
    school: "Некромантия",
    description: "Вы проклинаете цель, нанося ей дополнительные повреждения."
  },
  {
    name: "Невидимость",
    level: 2,
    classes: ["Бард", "Маг", "Чародей"],
    school: "Иллюзия",
    description: "Вы делаете существо или объект невидимым на время действия заклинания."
  },
  {
    name: "Паутина",
    level: 2,
    classes: ["Маг", "Чародей"],
    school: "Воплощение",
    description: "Вы создаёте массу липких паутин, ограничивающих передвижение существ."
  },
  {
    name: "Оглушающий Взрыв",
    level: 2,
    classes: ["Маг", "Чародей"],
    school: "Воплощение",
    description: "Вы создаёте мощную звуковую волну, оглушающую врагов."
  },
  {
    name: "Тишина",
    level: 2,
    classes: ["Бард", "Друид", "Рейнджер"],
    school: "Иллюзия",
    description: "Вы создаёте сферу абсолютной тишины, блокирующую звуки и заклинания со звуковыми компонентами."
  },
  {
    name: "Темная Завеса",
    level: 2,
    classes: ["Колдун", "Маг", "Чародей"],
    school: "Иллюзия",
    description: "Вы окутываете область магической темнотой."
  },
  {
    name: "Зеркальное Отражение",
    level: 2,
    classes: ["Маг", "Чародей"],
    school: "Иллюзия",
    description: "Вы создаете иллюзорные дубликаты себя, усложняя атаки против вас."
  },
  {
    name: "Исцеляющий Дух",
    level: 2,
    classes: ["Друид", "Следопыт"],
    school: "Воплощение",
    description: "Призываете духа исцеления, который восстанавливает здоровье существам в области."
  },
  {
    name: "Огненный Шар",
    level: 3,
    classes: ["Маг", "Чародей", "Колдун"],
    school: "Воплощение",
    description: "Вы создаёте огненный взрыв радиусом 6 метров, наносящий урон существам."
  },
  {
    name: "Контрзаклинание",
    level: 3,
    classes: ["Маг", "Чародей", "Колдун"],
    school: "Ограждение",
    description: "Вы прерываете сотворение другого заклинания."
  },
  {
    name: "Разрушающий Луч",
    level: 3,
    classes: ["Клирик", "Паладин"],
    school: "Воплощение",
    description: "Вы выпускаете мощный луч света, нанося урон нежити и злу."
  },
  {
    name: "Призрачная Стража",
    level: 3,
    classes: ["Клирик"],
    school: "Некромантия",
    description: "Вы призываете духов, которые защищают вас и наносят урон врагам."
  },
  {
    name: "Оживление Мертвых",
    level: 3,
    classes: ["Клирик", "Некромант"],
    school: "Некромантия",
    description: "Вы поднимаете скелета или зомби из трупа."
  },
  {
    name: "Магический Круг",
    level: 3,
    classes: ["Маг", "Клирик", "Чародей"],
    school: "Ограждение",
    description: "Создаёт защитный круг против определённого типа существ."
  },
  {
    name: "Летучесть",
    level: 3,
    classes: ["Бард", "Маг", "Чародей"],
    school: "Трансмутация",
    description: "Вы наделяете существо способностью летать."
  },
  {
    name: "Стена Огня",
    level: 4,
    classes: ["Маг", "Друид", "Чародей"],
    school: "Воплощение",
    description: "Вы создаёте стену пламени, наносящую урон всем, кто в неё входит."
  },
  {
    name: "Врата Края",
    level: 4,
    classes: ["Колдун", "Маг"],
    school: "Призывание",
    description: "Вы создаёте портал в другое измерение."
  },
  {
    name: "Слово Силы: Оглушение",
    level: 5,
    classes: ["Бард", "Клирик", "Маг"],
    school: "Зачарование",
    description: "Вы оглушаете существо магическим словом."
  },
  {
    name: "Столп Пламени",
    level: 5,
    classes: ["Клирик"],
    school: "Воплощение",
    description: "Столп божественного огня поражает врагов."
  },
  {
    name: "Призыв Существа",
    level: 6,
    classes: ["Маг", "Друид", "Чародей"],
    school: "Призывание",
    description: "Вы призываете существо для помощи."
  },
  {
    name: "Телепортация",
    level: 7,
    classes: ["Маг", "Чародей", "Бард"],
    school: "Призывание",
    description: "Вы мгновенно переносите себя и союзников на большое расстояние."
  },
  {
    name: "Слово Силы: Смерть",
    level: 9,
    classes: ["Маг", "Клирик"],
    school: "Некромантия",
    description: "Вы мгновенно убиваете существо с малым количеством здоровья."
  },
  {
    name: "Метеоритный Дождь",
    level: 9,
    classes: ["Маг"],
    school: "Воплощение",
    description: "Вы призываете обрушение огромных метеоритов, нанося разрушительный урон."
  }
];

// Карта классов D&D для маппинга с оригинальными названиями классов
export const CLASS_MAP = {
  "Волшебник": ["Маг"],
  "Чародей": ["Чародей"],
  "Жрец": ["Клирик"],
  "Друид": ["Друид"],
  "Бард": ["Бард"],
  "Паладин": ["Паладин"],
  "Следопыт": ["Рейнджер", "Следопыт"],
  "Чернокнижник": ["Колдун"],
  "Воин": [],
  "Плут": [],
  "Варвар": [],
  "Монах": []
};

// Функция для получения заклинаний доступных конкретному классу по его названию из приложения
export const getSpellsForClass = (characterClass: string): string[] => {
  if (!characterClass || !CLASS_MAP[characterClass]) {
    return [];
  }

  // Получаем список названий классов для поиска (например для Следопыта ищем и "Рейнджер" и "Следопыт")
  const classNames = CLASS_MAP[characterClass];
  
  // Возвращаем только названия заклинаний, доступные этому классу
  return spells
    .filter(spell => spell.classes.some(spellClass => classNames.includes(spellClass)))
    .map(spell => spell.name);
};

// Функция для получения детальной информации о заклинании по имени
export const getSpellDetails = (spellName: string): Spell | undefined => {
  return spells.find(spell => spell.name === spellName);
};

// Для обратной совместимости с существующим кодом
export const SPELLS = Object.fromEntries(
  Object.keys(CLASS_MAP).map(className => [
    className, 
    getSpellsForClass(className)
  ])
);

// Для обратной совместимости со старым форматом
export const SPELL_DETAILS = Object.fromEntries(
  spells.map(spell => [
    spell.name,
    {
      level: spell.level,
      school: spell.school,
      castingTime: "1 действие",
      range: "30 футов",
      duration: spell.level === 0 ? "Мгновенная" : "Концентрация, до 1 минуты",
      description: spell.description
    }
  ])
);
