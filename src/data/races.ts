// Расширенная версия списка рас D&D 5e

// Константы для источников
export const SOURCES = {
  PHB: 'PHB', // Player's Handbook (Книга игрока)
  VGTM: 'VGTM', // Volo's Guide to Monsters
  MTOF: 'MTOF', // Mordenkainen's Tome of Foes
  TCOE: 'TCOE', // Tasha's Cauldron of Everything
  EEPC: 'EEPC', // Elemental Evil Player's Companion
  SCAG: 'SCAG', // Sword Coast Adventurer's Guide
};

// Расширенный список рас
export const races = [
  {
    name: "Человек",
    description: "Люди — самая молодая из распространённых рас, поздно пришедшие в мир, определяемый расами более древними, и имеют короткую жизнь по сравнению с дварфами, эльфами и драконами.",
    abilityScoreIncrease: {
      all: 1
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Любой на выбор"],
    traits: ["Универсальность: Вы получаете один дополнительный навык на своё усмотрение."],
    vision: "Обычное",
    source: SOURCES.PHB,
    subraces: [
      {
        name: "Вариант человека",
        description: "Этот вариант человека даёт вам возможность настроить ваш персонаж более точно, выбрав способности, которыми он отличается.",
        abilityScoreIncrease: {
          custom: "Увеличьте две разные характеристики на 1."
        },
        traits: [
          "Навыки: Вы получаете владение одним навыком на ваш выбор.",
          "Черта: Вы получаете одну черту на ваш выбор."
        ]
      }
    ]
  },
  {
    name: "Эльф",
    description: "Эльфы — волшебный народ потусторонней грации, живущий в мире, но не полностью являющийся его частью.",
    abilityScoreIncrease: {
      dexterity: 2
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Эльфийский"],
    traits: [
      "Тёмное зрение: Привыкнув к сумраку леса и ночному небу, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Обострённые чувства: Вы владеете навыком Внимательность.",
      "Наследие фей: Вы совершаете с преимуществом спасброски от очарования, и вас невозможно магически усыпить.",
      "Транс: Эльфы не спят. Вместо этого они погружаются в глубокую медитацию, оставаясь в полубессознательном состоянии 4 часа в день. (Английский глагол, используемый для такой медитации — «trance».) Во время такой медитации вы остаётесь в сознании, о чём говорит то, что вы можете видеть сны. Эти сны на самом деле являются умственными упражнениями, которые стали привычкой за годы тренировок. После такого отдыха вы получаете все преимущества, которые человек получает после 8 часов сна."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.PHB,
    subraces: [
      {
        name: "Высший эльф",
        description: "Высшие эльфы обладают острым умом и знают, как минимум, основы магии.",
        abilityScoreIncrease: {
          intelligence: 1
        },
        traits: [
          "Эльфийское оружейное обучение: Вы владеете длинным мечом, коротким мечом, коротким луком и длинным луком.",
          "Заговор: Вы знаете один заговор из списка заклинаний волшебника. Базовой характеристикой для его использования является Интеллект.",
          "Дополнительный язык: Вы можете говорить, читать и писать на одном дополнительном языке на ваш выбор."
        ]
      },
      {
        name: "Лесной эльф",
        description: "Лесные эльфы предпочитают уединение девственных лесов и других диких земель.",
        abilityScoreIncrease: {
          wisdom: 1
        },
        traits: [
          "Эльфийское оружейное обучение: Вы владеете длинным мечом, коротким мечом, коротким луком и длинным луком.",
          "Быстрые ноги: Ваша базовая скорость передвижения увеличивается до 35 футов.",
          "Маскировка в дикой местности: Вы можете предпринять попытку спрятаться, даже если вы слабо заслонены листвой, сильным дождём, снегопадом, туманом или другими природными явлениями."
        ]
      },
      {
        name: "Тёмный эльф (дроу)",
        description: "Дроу, обитающие в подземном мире, часто злы и жестоки.",
        abilityScoreIncrease: {
          charisma: 1
        },
        traits: [
          "Превосходное тёмное зрение: Ваше тёмное зрение имеет радиус 120 футов.",
          "Чувствительность к солнечному свету: Вы совершаете с помехой броски атаки и проверки Мудрости (Внимательность), основанные на зрении, когда вы, цель вашей атаки или то, что вы пытаетесь заметить, находятся на прямом солнечном свете.",
          "Магия дроу: Вы знаете заклинание пляшущие огоньки. Когда вы достигаете 3 уровня, вы можете один раз в день использовать заклинание огонь фей. При достижении 5 уровня вы также можете раз в день использовать заклинание тьма. Базовой характеристикой для этих заклинаний является Харизма."
        ]
      }
    ]
  },
  {
    name: "Дварф",
    description: "Смелые и выносливые воины из глубинных владений, дварфы известны своей мастеровитостью и храбростью.",
    abilityScoreIncrease: {
      constitution: 2
    },
    size: "Средний",
    speed: 7.5,
    languages: ["Общий", "Дварфский"],
    traits: [
      "Тёмное зрение: Привыкнув к жизни под землёй, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Дварфская устойчивость: Вы совершаете с преимуществом спасброски от яда и получаете сопротивление к урону ядом.",
      "Дварфская боевая тренировка: Вы владеете боевым топором, ручным топором, лёгким молотом и боевым молотом.",
      "Знание камня: Если вы совершаете проверку Интеллекта (История), связанную с происхождением работы по камню, вы считаетесь владеющим навыком История и добавляете к проверке удвоенный бонус мастерства вместо обычного.",
      "Владение инструментами: Вы владеете ремесленными инструментами на ваш выбор: инструменты кузнеца, пивовара или каменщика."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.PHB,
    subraces: [
      {
        name: "Горный дварф",
        description: "Горные дварфы сильны и выносливы, привыкли к суровой жизни в скалистых вершинах.",
        abilityScoreIncrease: {
          strength: 2
        },
        traits: [
          "Тренировка в доспехах: Вы владеете лёгкими и средними доспехами.",
        ]
      },
      {
        name: "Холмовой дварф",
        description: "Холмовые дварфы более острые на ум, чем их горные сородичи, и известны мудростью, острым чутьём и глубокой интуицией.",
        abilityScoreIncrease: {
          wisdom: 1
        },
        traits: [
          "Дварфская выдержка: Максимальное значение ваших хитов увеличивается на 1, и вы получаете 1 дополнительный хит с каждым новым уровнем.",
        ]
      }
    ]
  },
  {
    name: "Полурослик",
    description: "Полурослики стараются жить тихой жизнью вдали от нестабильного, меняющегося мира. Они являются невысокими, дружелюбными и приветливыми.",
    abilityScoreIncrease: {
      dexterity: 2
    },
    size: "Маленький",
    speed: 7.5,
    languages: ["Общий", "Полуросликов"],
    traits: [
      "Везучий: Если у вас выпало «1» на к20 при броске атаки, проверке характеристики или спасброске, вы можете перебросить кость, но должны использовать но��ый результат.",
      "Храбрый: Вы совершаете с преимуществом спасброски от состояния испуган.",
      "Проворство полуросликов: Вы можете перемещаться сквозь пространство, занятое существами, чей размер больше вашего."
    ],
    vision: "Обычное",
    source: SOURCES.PHB,
    subraces: [
      {
        name: "Коренастый полурослик",
        description: "Как коренастый полурослик, вы выносливее других и обладаете некоторой устойчивостью к ядам.",
        abilityScoreIncrease: {
          constitution: 1
        },
        traits: [
          "Устойчивость коренастого: Вы совершаете с преимуществом спасброски от яда и получаете сопротивление к урону ядом.",
        ]
      },
      {
        name: "Легконогий полурослик",
        description: "Как легконогий полурослик, вы можете легко прятаться от чужих глаз, даже используя в качестве укрытия лишь других существ.",
        abilityScoreIncrease: {
          charisma: 1
        },
        traits: [
          "Естественная скрытность: Вы можете предпринять попытку спрятаться даже если заслонены только существом, превосходящим вас в размере как минимум на одну категорию.",
        ]
      }
    ]
  },
  {
    name: "Полуэльф",
    description: "Полуэльфы сочетают в себе, как говорят многие, лучшие качества обеих рас: человеческие любознательность, изобретательность и амбиции, приправленные изысканными чувствами, любовью к природе и тягой к искусству, присущими эльфам.",
    abilityScoreIncrease: {
      charisma: 2,
      custom: "Увеличьте две характеристики на ваш выбор на 1."
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Эльфийский", "Один на выбор"],
    traits: [
      "Тёмное зрение: Благодаря эльфийской крови, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Наследие фей: Вы совершаете с преимуществом спасброски от очарования, и вас невозможно магически усыпить.",
      "Универсальность навыков: Вы получаете владение двумя навыками на ваш выбор."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.PHB,
    subraces: []
  },
  {
    name: "Полуорк",
    description: "Полуорки объединяют в себе лучшие качества людей и орков, сочетая дисциплину, изобретательность и решительность первых с физической силой, выносливостью и смелостью вторых.",
    abilityScoreIncrease: {
      strength: 2,
      constitution: 1
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Орочий"],
    traits: [
      "Тёмное зрение: Благодаря орочьей крови, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Угрожающий: Вы владеете навыком Запугивание.",
      "Дикая ярость: Если вы опускаетесь до 0 хитов, но не убиты, вы можете вместо этого остаться на 1 хите. Вы не можете использовать эту способность снова, пока не завершите длительный отдых.",
      "Атаки дикаря: Если вы совершаете критическое попадание оружием рукопашной атаки, вы можете добавить к урону ещё одну кость оружия."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.PHB,
    subraces: []
  },
  {
    name: "Гном",
    description: "Дух и энергия гномов, их энтузиазм, юмор и вечное любопытство — жизненно важные качества в мире, управляемом войной и магией.",
    abilityScoreIncrease: {
      intelligence: 2
    },
    size: "Маленький",
    speed: 7.5,
    languages: ["Общий", "Гномий"],
    traits: [
      "Тёмное зрение: Привыкнув к жизни под землёй, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Гномья хитрость: Вы совершаете с преимуществом спасброски Интеллекта, Мудрости и Харизмы против магии."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.PHB,
    subraces: [
      {
        name: "Лесной гном",
        description: "Лесные гномы, обладающие естественной скрытностью и врождённой магией иллюзий, являются скрытными и сложными для обнаружения.",
        abilityScoreIncrease: {
          dexterity: 1
        },
        traits: [
          "Естественный иллюзионист: Вы знаете заклинание малая иллюзия. Базовой характеристикой для его использования является Интеллект.",
          "Говорящий с маленькими зверями: Посредством звуков и жестов вы можете передавать простые идеи Маленьким или ещё меньшим зверям. Лесные гномы любят животных и часто держат белок, барсуков, кроликов, кротов, дятлов и других существ как любимых питомцев."
        ]
      },
      {
        name: "Скальный гном",
        description: "Скальные гномы обладают необыкновенной изобретательностью и выносливостью, которую можно сравнить с выносливостью их горных собратьев, дварфов.",
        abilityScoreIncrease: {
          constitution: 1
        },
        traits: [
          "Знание искусника: Если вы совершаете проверку Интеллекта (История), связанную с магическими, алхимическими или технологическими предметами, вы можете добавить к проверке удвоенный бонус мастерства вместо обычного.",
          "Жестянщик: Вы владеете ремесленными инструментами (инструменты жестянщика). Используя эти инструменты, вы можете потратить 1 час и материалы стоимостью 10 зм, чтобы создать Крошечное механическое устройство (КС 10)."
        ]
      }
    ]
  },
  {
    name: "Тифлинг",
    description: "Тифлинги — потомки людей и существ из нижних планов, и демоническая кровь течёт в их жилах, что делает их объектами подозрения и предрассудков.",
    abilityScoreIncrease: {
      charisma: 2,
      intelligence: 1
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Инфернальный"],
    traits: [
      "Тёмное зрение: Благодаря вашему адскому наследию, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Адское сопротивление: Вы получаете сопротивление к урону огнём.",
      "Дьявольское наследие: Вы знаете заклинание чудотворство. Когда вы достигаете 3 уровня, вы можете один раз в день использовать заклинание адское возмездие как заклинание 2 уровня. При достижении 5 уровня вы также можете раз в день использовать заклинание тьма. Базовой характеристикой для этих заклинаний является Харизма."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.PHB,
    subraces: []
  },
  {
    name: "Драконорождённый",
    description: "Драконорождённые происходят из драконьей крови, и их чешуйчатая кожа отливает цветом, соответствующим их драконьему наследию.",
    abilityScoreIncrease: {
      strength: 2,
      charisma: 1
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Драконий"],
    traits: [
      "Наследие драконов: Вы получаете драконье наследие, которое определяет цвет вашей чешуи, тип урона вашего оружия дыхания и сопротивление к урону.",
      "Оружие дыхания: Вы можете действием выдохнуть разрушительную энергию. Ваше наследие драконов определяет размер, форму и тип урона вашего выдоха.",
      "Сопротивление урону: Вы получаете сопротивление к типу урона, связанному с вашим наследием драконов."
    ],
    vision: "Обычное",
    source: SOURCES.PHB,
    subraces: [
      {
        name: "Золотой",
        description: "Драконорождённые с наследием золотых драконов являются благородными и справедливыми.",
        traits: [
          "Драконье наследие: Оружие дыхания - огонь (15-футовый конус), сопротивление урону - огонь."
        ]
      },
      {
        name: "Серебряный",
        description: "Драконорождённые с наследием серебряных драконов обладают благородной душой и чувством справедливости.",
        traits: [
          "Драконье наследие: Оружие дыхания - холод (15-футовый конус), сопротивление урону - холод."
        ]
      },
      {
        name: "Красный",
        description: "Драконорождённые с наследием красных драконов известны своей жестокостью и жаждой сокровищ.",
        traits: [
          "Драконье наследие: Оружие дыхания - огонь (15-футовый конус), сопротивление урону - огонь."
        ]
      },
      {
        name: "Чёрный",
        description: "Драконорождённые с наследием чёрных драконов обладают жестоким нравом и часто живут в болотах.",
        traits: [
          "Драконье наследие: Оружие дыхания - кислота (5 на 30 футов линия), сопротивление урону - кислота."
        ]
      },
      {
        name: "Синий",
        description: "Драконорождённые с наследием синих драконов часто тщеславны и территориальны.",
        traits: [
          "Драконье наследие: Оружие дыхания - электричество (5 на 30 футов линия), сопротивление урону - электричество."
        ]
      }
    ]
  },
  {
    name: "Аасимар",
    description: "Являясь прямыми потомками небожителей, аасимары отличаются неземной красотой и связью с высшими силами добра.",
    abilityScoreIncrease: {
      charisma: 2,
      wisdom: 1
    },
    size: "Средний",
    speed: 9,
    languages: ["Общий", "Небесный"],
    traits: [
      "Тёмное зрение: Благодаря небесному наследию, вы обладаете превосходным зрением в темноте и при тусклом освещении. На расстоянии в 18 метров вы при тусклом освещении можете видеть так, как будто это яркое освещение, и в темноте так, как будто это тусклое освещение. В темноте вы не можете различать цвета, только оттенки серого.",
      "Небесное сопротивление: Вы получаете сопротивление к урону некротической энергией �� излучением.",
      "Целительные руки: Действием вы можете коснуться существа и восстановить ему количество хитов, равное вашему уровню. Вы не можете использовать эту способность снова, пока не закончите длительный отдых.",
      "Свет небес: Вы знаете заклинание свет. Базовой характеристикой для его использования является Харизма."
    ],
    vision: "Тёмное зрение (18 м)",
    source: SOURCES.VGTM,
    subraces: []
  }
];

// Функции для доступа к данным
export function getAllRaces() {
  return races;
}

export function getRaceByName(name: string) {
  return races.find(race => race.name === name) || null;
}

export function getSubracesForRace(raceName: string) {
  const race = getRaceByName(raceName);
  return race?.subraces || [];
}

// Получение источников
export function getAllRaceSources() {
  return Object.values(SOURCES);
}

// Фильтрация рас по источнику
export function getRacesBySource(source: string) {
  return races.filter(race => race.source === source);
}
