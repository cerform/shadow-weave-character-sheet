# –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π, AI-–∞–Ω–∞–ª–∏–∑–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (–≤–∫–ª—é—á–∞—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ React (—á–µ—Ä–µ–∑ ErrorBoundary)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –∏ unhandled promises
- ‚úÖ –†—É—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–∑ –ª—é–±–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º: Frontend, Backend, Database, Auth, API, Network
- ‚úÖ –£—Ä–æ–≤–Ω–∏ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏: Info, Warning, Error, Critical
- ‚úÖ **AI-–∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π** —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —à–∞–≥–∞–º–∏
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∞–º–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (90+ –¥–Ω–µ–π)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º

## –î–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º

–ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å: `/admin/error-logs`

–î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—å—é `admin`.

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Frontend –æ—à–∏–±–∫–∏

–í—Å–µ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `ErrorBoundary`:

```tsx
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
throw new Error('–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫');
```

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ unhandled promises —Ç–æ–∂–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è `useErrorLogger`:

```tsx
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
window.addEventListener('error', ...);
window.addEventListener('unhandledrejection', ...);
```

## –†—É—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ò–∑ Frontend –∫–æ–¥–∞

```typescript
import { ErrorLogsService } from '@/services/ErrorLogsService';

// –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
try {
  // ... –∫–æ–¥
} catch (error) {
  await ErrorLogsService.logFrontendError(
    error as Error,
    'error', // severity: 'info' | 'warning' | 'error' | 'critical'
    {
      component: 'MyComponent',
      action: 'handleSubmit',
      userId: user?.id,
    }
  );
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ª–æ–≥–∞
await ErrorLogsService.createErrorLog({
  category: 'api',
  severity: 'warning',
  message: 'API rate limit exceeded',
  url: window.location.href,
  metadata: {
    endpoint: '/api/users',
    statusCode: 429,
  },
});
```

### –ò–∑ Edge Functions

```typescript
import { createClient } from '@supabase/supabase-js';
import { logBackendError, logApiError } from '../_shared/errorLogger.ts';

const supabase = createClient(
  Deno.env.get('SUPABASE_URL') ?? '',
  Deno.env.get('SUPABASE_SERVICE_ROLE_KEY') ?? ''
);

// –í edge function
try {
  // ... –∫–æ–¥
} catch (error) {
  await logBackendError(supabase, error, 'critical', {
    function: 'my-edge-function',
    requestId: crypto.randomUUID(),
  });
  
  return new Response(
    JSON.stringify({ error: 'Internal server error' }),
    { status: 500 }
  );
}

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ API
try {
  const response = await fetch('https://api.example.com/data');
  if (!response.ok) {
    throw new Error(`API error: ${response.status}`);
  }
} catch (error) {
  await logApiError(supabase, error, 'error', {
    api: 'external-service',
    endpoint: '/data',
  });
}
```

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—à–∏–±–æ–∫

- **frontend** - –û—à–∏–±–∫–∏ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, UI –ª–æ–≥–∏–∫–∏
- **backend** - –û—à–∏–±–∫–∏ edge functions, —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏
- **database** - –û—à–∏–±–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î, RPC —Ñ—É–Ω–∫—Ü–∏–π
- **auth** - –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **api** - –û—à–∏–±–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö API
- **network** - –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏, —Ç–∞–π–º–∞—É—Ç—ã
- **other** - –ü—Ä–æ—á–∏–µ –æ—à–∏–±–∫–∏

## –£—Ä–æ–≤–Ω–∏ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏

- **info** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **warning** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ
- **error** - –û—à–∏–±–∫–∞, —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- **critical** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## API ErrorLogsService

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤

```typescript
// –í—Å–µ –ª–æ–≥–∏
const logs = await ErrorLogsService.getErrorLogs();

// –° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
const logs = await ErrorLogsService.getErrorLogs({
  category: 'frontend',
  severity: 'error',
  resolved: false,
  dateFrom: '2024-01-01',
  search: 'timeout',
});
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```typescript
const stats = await ErrorLogsService.getErrorStats();
// Returns:
// {
//   total: number,
//   byCategory: { frontend: 10, backend: 5, ... },
//   bySeverity: { error: 12, critical: 3, ... },
//   resolved: number,
//   unresolved: number,
// }
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏

```typescript
// –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é
await ErrorLogsService.markAsResolved(errorId);

// –£–¥–∞–ª–∏—Ç—å –ª–æ–≥
await ErrorLogsService.deleteErrorLog(errorId);

// –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
const deletedCount = await ErrorLogsService.cleanupOldLogs();
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ error_logs

```sql
CREATE TABLE error_logs (
  id UUID PRIMARY KEY,
  category error_category NOT NULL,
  severity error_severity NOT NULL,
  message TEXT NOT NULL,
  stack_trace TEXT,
  user_id UUID,
  user_email TEXT,
  url TEXT,
  user_agent TEXT,
  metadata JSONB,
  resolved BOOLEAN DEFAULT false,
  resolved_by UUID,
  resolved_at TIMESTAMP,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

### RLS –ü–æ–ª–∏—Ç–∏–∫–∏

- –ß–∏—Ç–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã
- **–°–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–≥—É—Ç –í–°–ï** (–≤–∫–ª—é—á–∞—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫)
- –û–±–Ω–æ–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã

## AI-–∞–Ω–∞–ª–∏–∑ –∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### AI-–∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–∫–∏

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π AI-–∞–Ω–∞–ª–∏–∑ –ª—é–±–æ–π –æ—à–∏–±–∫–∏:

```typescript
import { ErrorDebugService } from '@/services/ErrorDebugService';

const analysis = await ErrorDebugService.analyzeError(errorLog);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏, 
// —à–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

```typescript
const fix = await ErrorDebugService.getAutoFixSuggestion(errorLogId);

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
// {
//   canAutoFix: boolean,           // –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
//   fixSteps: string[],            // –®–∞–≥–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
//   codeChanges: [{                // –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
//     file: string,                // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
//     description: string,         // –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
//     suggestion: string           // –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –∫–æ–¥
//   }],
//   prevention: string             // –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤ –±—É–¥—É—â–µ–º
// }
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥ –æ—à–∏–±–∫–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
2. –ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è AI-–∞–Ω–∞–ª–∏–∑–∞
3. –ù–∞–∂–º–∏—Ç–µ "–ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
4. –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º —à–∞–≥–∞–º –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –æ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö:

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
await ErrorLogsService.logFrontendError(error);

// –î–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω–∞—è —Å–µ—Å—Å–∏—è
// sessionId —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ sessionStorage
```

**–í–∞–∂–Ω–æ:** –î–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `user_id` –∏ `user_email` –±—É–¥—É—Ç `null`
- –í `metadata.sessionId` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω—ã–π ID —Å–µ—Å—Å–∏–∏
- `metadata.isAuthenticated` –±—É–¥–µ—Ç `false`

## Best Practices

1. **–ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é)
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç** –≤ metadata –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏**
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
5. **–ü–æ–º–µ—á–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏** –∫–∞–∫ resolved
6. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏** –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏

```typescript
try {
  const response = await fetch('/api/data');
  const data = await response.json();
} catch (error) {
  await ErrorLogsService.createErrorLog({
    category: 'network',
    severity: 'warning',
    message: 'Failed to fetch data',
    url: window.location.href,
    metadata: {
      endpoint: '/api/data',
      error: error.message,
    },
  });
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –ë–î

```typescript
try {
  const { data, error } = await supabase
    .from('users')
    .select('*');
    
  if (error) throw error;
} catch (error) {
  await ErrorLogsService.createErrorLog({
    category: 'database',
    severity: 'error',
    message: 'Database query failed',
    metadata: {
      table: 'users',
      operation: 'select',
      error: error.message,
    },
  });
}
```

### Wrapper –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```typescript
async function safeExecute<T>(
  fn: () => Promise<T>,
  errorContext: string
): Promise<T | null> {
  try {
    return await fn();
  } catch (error) {
    await ErrorLogsService.logFrontendError(
      error as Error,
      'error',
      { context: errorContext }
    );
    return null;
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const data = await safeExecute(
  () => fetchUserData(userId),
  'fetchUserData'
);
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã:

- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —É—Ä–æ–≤–Ω—è–º —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏
- üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤
- üìù –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–µ–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º (resolved/unresolved)
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤
- üßπ –ú–∞—Å—Å–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

## Troubleshooting

### –õ–æ–≥–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–æ–ª—å `admin`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `has_role` –≤ –ë–î

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–æ–≤

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö
2. –ü–æ–º–µ—á–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–∞–∫ resolved
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π (—Ç–æ–ª—å–∫–æ resolved)
- –î–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Ä—É—á–Ω—É—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ" –≤ –∞–¥–º–∏–Ω–∫–µ
- Stack traces –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSONB –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
